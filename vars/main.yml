---
factname: yourlabs_drone_{{ home.replace('/', '_') }}
remember:
- name: url
  question: What is the drone full URL you are deploying ?
  type: string

- name: admin
  question: What is your github username (will be drone admin)
  type: string

- name: filter
  question: |
    Do you want filtering users ?
    Only filtered users and organisation users will be allow to register
  default: False
  type: bool

- name: filtered_orgs
  question: Which orgs do you want to allow ? (comma spareted if multiple)
  type: string
  when: filter

- name: filtered_users
  question: Which users do you want to allow ? (comma spareted if multiple)
  type: string
  when: filter

- name: backend
  question: What backend for this drone deployment ?
  regexp: github|gitlab

- name: gitlab_url
  question: What is the gitlab full url ?
  default: https://gitlab.com

- name: gitlab_id
  question: What is the gitlab app id ?

- name: gitlab_secret
  question: What is the gitlab secret ?

- name: github_url
  question: What is the github server full url ?
  default: https://github.com

- name: github_id
  question: What is the github id ?

- name: github_secret
  question: What is the github secret ?

- name: rpc_pass
  question: What is RPC password ? (use for server <-> runner)
  type: string

github_secret_when: '{{ backend == "github" }}'
github_url_when: '{{ backend == "github" }}'
github_id_when: '{{ backend == "github" }}'
gitlab_secret_when: '{{ backend == "gitlab" }}'
gitlab_id_when: '{{ backend == "gitlab" }}'
gitlab_url_when: '{{ backend == "gitlab" }}'
